import{r as s,j as b,d as w,c as S}from"./index-CjbR5zlf.js";import{f as $}from"./form-BnLW7AoU.js";function U(c){const{name:m,control:x,defaultValue:C,rules:N,shouldUnregister:h,min:t,max:r,step:p=1,allowDecimals:l=!0,decimalPlaces:d=2,allowNegative:f=!0,className:V,disabled:y,...k}=c,{field:e,fieldState:{error:v}}=$({name:m,control:x,defaultValue:C,rules:N,shouldUnregister:h}),g=s.useMemo(()=>l?f?/^-?\d*\.?\d*$/:/^\d*\.?\d*$/:f?/^-?\d*$/:/^\d*$/,[l,f]),I=s.useMemo(()=>({"aria-valuemin":t,"aria-valuemax":r,"aria-valuenow":e.value!==void 0?e.value:void 0,"aria-invalid":!!v}),[t,r,e.value,v]),F=s.useCallback(n=>{const a=n.target.value;if(!a){e.onChange(void 0);return}if(g.test(a)){n.target.value=a;const u=parseFloat(a);isNaN(u)?a==="-"&&f?n.target.value="-":a==="."&&l&&(n.target.value="0.",e.onChange(0)):e.onChange(u)}},[g,e,f,l]),D=s.useCallback(n=>{e.onBlur();const a=n.target.value;if(a&&a!=="-"&&a!=="."){const u=parseFloat(a);if(!isNaN(u)){let i=u;t!==void 0&&u<t&&(i=t),r!==void 0&&u>r&&(i=r),l&&d!==void 0&&(i=Number(i.toFixed(d))),i!==u&&(e.onChange(i),n.target.value=i.toString())}}else(a==="-"||a==="."||a==="0.")&&(n.target.value="",e.onChange(void 0))},[e,t,r,l,d]),j=s.useCallback(n=>{if(n.key==="ArrowUp"||n.key==="ArrowDown"){n.preventDefault();const a=n.currentTarget.value,u=a?parseFloat(a):0,i=n.key==="ArrowUp"?p:-p;let o=u+i;t!==void 0&&o<t&&(o=t),r!==void 0&&o>r&&(o=r),l&&d!==void 0&&(o=Number(o.toFixed(d))),n.currentTarget.value=o.toString(),e.onChange(o)}},[p,t,r,l,d,e]),A=s.useCallback(()=>e.value===void 0||e.value===null?"":e.value.toString(),[e.value]);return b.jsx(w,{...k,...I,className:S(v&&"border-red-500 focus-visible:ring-red-500",V),name:e.name,ref:e.ref,type:"text",inputMode:l?"decimal":"numeric",value:A(),onChange:F,onBlur:D,onKeyDown:j,disabled:y})}const B=s.forwardRef((c,m)=>b.jsx(w,{...c,type:"text",ref:m}));B.displayName="InputNumber";export{U as I};
