import{r as n,u as M,j as e,X as N,c as u,o as y,F as P}from"./index-CjbR5zlf.js";import{R as A,T as E,P as F,C as I,V as T,d as U,e as q,f as O}from"./select-CBNmlDFn.js";const V=n.forwardRef((i,c)=>{const{t:d}=M("common"),{options:f,value:t=[],onChange:l,onBlur:a,disabled:S=!1,placeholder:p="Select options",maxDisplayItems:h=2,className:g,name:j,...C}=i,[z,k]=n.useState(!1),m=n.useMemo(()=>f?.filter(s=>t.includes(s.id)),[f,t]),R=n.useCallback(s=>{if(!l)return;const r=t.findIndex(x=>x===s);let o;r>=0?(o=[...t],o.splice(r,1)):o=[...t,s],l(o),a&&requestAnimationFrame(()=>{a()})},[l,t,a]),B=n.useCallback(s=>{s.stopPropagation(),l?.([]),a&&requestAnimationFrame(()=>{a()})},[l,a]),b=n.useCallback((s,r)=>{s.stopPropagation();const o=t.filter(x=>x!==r);l?.(o),a&&requestAnimationFrame(()=>{a()})},[l,t,a]),D=n.useMemo(()=>m?.length===0?e.jsx("span",{className:"text-neutral-350",children:p}):m?.length<=h?e.jsx("div",{className:"flex flex-wrap gap-1 overflow-hidden",children:m?.map(s=>e.jsxs("div",{className:"flex items-center gap-1 rounded-sm bg-muted px-1 py-0.5 text-xs",children:[s.icon&&n.createElement(s.icon,{className:"size-3 mr-1"}),e.jsx("span",{className:"truncate",children:s.name}),e.jsxs("button",{type:"button",onClick:r=>b(r,s.id),className:"ml-1 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-1 focus:ring-teal",children:[e.jsx(N,{className:"size-3"}),e.jsxs("span",{className:"sr-only",children:["Remove ",s.name]})]})]},s.id.toString()))}):e.jsx("span",{children:d("selected_items_count",{count:m?.length})}),[m,p,h,b]);return e.jsxs(A,{open:z,onOpenChange:s=>{k(s),s||a?.()},children:[e.jsxs(E,{ref:c,id:j,name:j,onBlur:a,disabled:S,className:u("flex min-h-10 w-full items-center justify-between rounded border border-neutral-300 bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-neutral-350 focus:outline-none focus:ring-1 focus:ring-teal disabled:cursor-not-allowed disabled:opacity-50",g),...C,children:[e.jsx("div",{className:"flex flex-1 flex-wrap gap-1 overflow-hidden",children:D}),e.jsxs("div",{className:"flex items-center self-stretch pl-1",children:[!!t.length&&e.jsxs("button",{type:"button",onClick:B,className:"mr-1 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-1 focus:ring-teal",children:[e.jsx(N,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Clear all"})]}),e.jsx(y,{className:"size-4 opacity-50"})]})]}),e.jsx(F,{children:e.jsxs(I,{position:"popper",className:u("relative z-50 max-h-96 overflow-hidden rounded border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","w-[var(--radix-select-trigger-width)] data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",g),children:[e.jsx(v,{}),e.jsxs(T,{className:"p-1",children:[f?.map(s=>e.jsxs("div",{onClick:()=>R(s.id),className:u("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50","hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",t.includes(s.id)&&"bg-accent/50"),children:[e.jsx("div",{className:"mr-2 flex size-4 items-center justify-center rounded-sm border border-primary",children:t.includes(s.id)&&e.jsx(P,{className:"size-3"})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.icon&&n.createElement(s.icon,{className:"size-4"}),e.jsx("span",{children:s.name})]})]},s.id.toString())),f?.length===0&&e.jsx("div",{className:"py-6 text-center text-sm",children:"No options available"})]}),e.jsx(w,{})]})})]})});V.displayName="MultiSelect";const v=n.forwardRef(({className:i,...c},d)=>e.jsx(U,{ref:d,className:u("flex cursor-default items-center justify-center py-1",i),...c,children:e.jsx(q,{className:"size-4"})}));v.displayName="SelectScrollUpButton";const w=n.forwardRef(({className:i,...c},d)=>e.jsx(O,{ref:d,className:u("flex cursor-default items-center justify-center py-1",i),...c,children:e.jsx(y,{className:"size-4"})}));w.displayName="SelectScrollDownButton";export{V as M};
